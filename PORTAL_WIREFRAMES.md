# Portal Wireframes & Implementation Specifications

## Table of Contents

1. [Client Portal Wireframes](#client-portal-wireframes)
2. [Subcontractor Portal Wireframes](#subcontractor-portal-wireframes)
3. [Staff Portal Wireframes](#staff-portal-wireframes)
4. [Component Specifications](#component-specifications)
5. [Database Schema Updates](#database-schema-updates)
6. [API Endpoint Specifications](#api-endpoint-specifications)
7. [Integration Requirements](#integration-requirements)

## Client Portal Wireframes

### 1. Client Dashboard (Home Page)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BENSON HOME SOLUTIONS                    [Profile] [Notifications]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Welcome back, [Client Name]                                     â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   ACTIVE PROJECTS   â”‚ â”‚  PENDING APPROVALS  â”‚ â”‚  MESSAGES   â”‚ â”‚
â”‚ â”‚        3            â”‚ â”‚         2           â”‚ â”‚      5      â”‚ â”‚
â”‚ â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚ â€¢ Kitchen Remodel   â”‚ â”‚ â€¢ Material Selectionâ”‚ â”‚ â€¢ PM Update â”‚ â”‚
â”‚ â”‚ â€¢ Water Damage      â”‚ â”‚ â€¢ Change Order #3   â”‚ â”‚ â€¢ Schedule  â”‚ â”‚
â”‚ â”‚ â€¢ Inspection Repair â”‚ â”‚                     â”‚ â”‚ â€¢ Photos    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ RECENT ACTIVITY                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“· New photos uploaded - Kitchen demolition complete       â”‚ â”‚
â”‚ â”‚ ðŸ’° Change order approved - Additional plumbing work        â”‚ â”‚
â”‚ â”‚ ðŸ“‹ Insurance documentation submitted to carrier            â”‚ â”‚
â”‚ â”‚ ðŸ”§ Work started - Electrical rough-in                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ INSURANCE CLAIMS STATUS                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Claim #12345 - Water Damage        Status: APPROVED        â”‚ â”‚
â”‚ â”‚ Coverage: $45,000    Deductible: $2,500    Remaining: $0   â”‚ â”‚
â”‚ â”‚ [View Details] [Download Documents]                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Project Details Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back to Dashboard]                     Kitchen Remodel Projectâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ PROJECT OVERVIEW                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ STATUS          â”‚ â”‚ TIMELINE        â”‚ â”‚ BUDGET              â”‚ â”‚
â”‚ â”‚ In Progress     â”‚ â”‚ Week 2 of 4     â”‚ â”‚ $28,500 / $30,000   â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%  â”‚ â”‚ On Schedule     â”‚ â”‚ 5% under budget     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                     â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚     TIMELINE        â”‚ â”‚        PROGRESS PHOTOS              â”‚ â”‚
â”‚ â”‚                     â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ âœ… Week 1: Demo     â”‚ â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”        â”‚ â”‚
â”‚ â”‚ ðŸ”§ Week 2: Rough-in â”‚ â”‚ â”‚ðŸ“·  â”‚ â”‚ðŸ“·  â”‚ â”‚ðŸ“·  â”‚ â”‚ðŸ“·  â”‚        â”‚ â”‚
â”‚ â”‚ â³ Week 3: Drywall  â”‚ â”‚ â”‚Day â”‚ â”‚Day â”‚ â”‚Day â”‚ â”‚Day â”‚        â”‚ â”‚
â”‚ â”‚ â³ Week 4: Finish   â”‚ â”‚ â”‚ 1  â”‚ â”‚ 5  â”‚ â”‚ 8  â”‚ â”‚12  â”‚        â”‚ â”‚
â”‚ â”‚                     â”‚ â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚ â”‚ [View Full Timeline]â”‚ â”‚ [View All Photos]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ TABS: [Overview] [Messages] [Approvals] [Documents] [Photos]   â”‚
â”‚                                                                 â”‚
â”‚ RECENT MESSAGES                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ‘· Mike (PM): Electrical inspection passed - moving to drywallâ”‚
â”‚ â”‚ ðŸ“… 2 hours ago                               [Reply] [View] â”‚ â”‚
â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚ ðŸ  You: When will the new appliances be delivered?         â”‚ â”‚
â”‚ â”‚ ðŸ“… Yesterday                                     [Edit]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [View All Messages] [Start New Conversation]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Change Order Approval Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back to Project]                      Change Order Approval  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ CHANGE ORDER #003                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ REASON: Hidden damage discovered behind kitchen wall        â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ ORIGINAL SCOPE:                                             â”‚ â”‚
â”‚ â”‚ â€¢ Remove drywall and install new                           â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ ADDITIONAL WORK REQUIRED:                                   â”‚ â”‚
â”‚ â”‚ â€¢ Repair structural damage to wall studs                   â”‚ â”‚
â”‚ â”‚ â€¢ Replace damaged electrical wiring                        â”‚ â”‚
â”‚ â”‚ â€¢ Additional waterproofing behind sink area               â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ COST IMPACT: + $2,350                                      â”‚ â”‚
â”‚ â”‚ TIME IMPACT: + 2 days                                      â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ INSURANCE: âœ… Covered under claim #12345                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ SUPPORTING DOCUMENTATION                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“· Photo: Wall damage behind sink                          â”‚ â”‚
â”‚ â”‚ ðŸ“‹ Report: Structural assessment                           â”‚ â”‚
â”‚ â”‚ ðŸ’° Quote: Additional electrical work                       â”‚ â”‚
â”‚ â”‚ [View All Documents]                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                    DIGITAL SIGNATURE                        â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ By signing below, I approve the additional work outlined   â”‚ â”‚
â”‚ â”‚ in Change Order #003 for the amount of $2,350.             â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚         [Click to Sign Digitally]                       â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ [âœ… Approve Change Order]  [âŒ Reject]  [ðŸ’¬ Ask Questions] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Subcontractor Portal Wireframes

### 1. Mobile Work Queue (Primary Screen)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”¨ BENSON SUBS        [ðŸ‘¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ MY WORK - TODAY            â”‚
â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸš¨ URGENT                â”‚ â”‚
â”‚ â”‚Kitchen Remodel          â”‚ â”‚
â”‚ â”‚ðŸ“ 123 Oak St           â”‚ â”‚
â”‚ â”‚âš¡ Electrical rough-in   â”‚ â”‚
â”‚ â”‚â° Due: 2:00 PM         â”‚ â”‚
â”‚ â”‚[START WORK]             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â³ ASSIGNED              â”‚ â”‚
â”‚ â”‚Water Damage Repair      â”‚ â”‚
â”‚ â”‚ðŸ“ 456 Elm St           â”‚ â”‚
â”‚ â”‚ðŸ”§ Plumbing repair       â”‚ â”‚
â”‚ â”‚â° Due: Tomorrow         â”‚ â”‚
â”‚ â”‚[VIEW DETAILS]           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚âš ï¸  BLOCKED              â”‚ â”‚
â”‚ â”‚Bathroom Renovation      â”‚ â”‚
â”‚ â”‚ðŸ“ 789 Pine St          â”‚ â”‚
â”‚ â”‚ðŸš° Waiting on permits    â”‚ â”‚
â”‚ â”‚â“ [WHY BLOCKED?]        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ THIS WEEK (5 more)  [VIEW] â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚[ðŸ ][ðŸ“‹][ðŸ’¬][ðŸ’°][ðŸ‘¤]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Task Details (Mobile)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] Kitchen Remodel    [â‹¯] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ ELECTRICAL ROUGH-IN         â”‚
â”‚                             â”‚
â”‚ ðŸ“ 123 Oak Street           â”‚
â”‚ ðŸ  Kitchen & Dining Room    â”‚
â”‚ â° Today, 2:00 PM           â”‚
â”‚ ðŸ‘· Mike Chen (PM)           â”‚
â”‚ â˜Žï¸  (541) 555-0123          â”‚
â”‚                             â”‚
â”‚ SCOPE OF WORK               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â€¢ Install outlets (8)    â”‚ â”‚
â”‚ â”‚â€¢ Install switches (4)   â”‚ â”‚
â”‚ â”‚â€¢ Run wire for appliancesâ”‚ â”‚
â”‚ â”‚â€¢ Install GFCI outlets   â”‚ â”‚
â”‚ â”‚â€¢ Test all circuits      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ ACCESS INFO                 â”‚
â”‚ ðŸ”‘ Lockbox: 1234           â”‚
â”‚ ðŸš— Park in driveway        â”‚
â”‚ ðŸ• Dog friendly             â”‚
â”‚                             â”‚
â”‚ SAFETY NOTES                â”‚
â”‚ âš ï¸  Main power is ON        â”‚
â”‚ âš ï¸  Wear safety glasses     â”‚
â”‚                             â”‚
â”‚ [ðŸ“‹ VIEW PLANS]             â”‚
â”‚ [ðŸ“· TAKE PHOTOS]            â”‚
â”‚ [ðŸ’¬ MESSAGE PM]             â”‚
â”‚ [âœ… MARK COMPLETE]          â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚[ðŸ ][ðŸ“‹][ðŸ’¬][ðŸ’°][ðŸ‘¤]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Photo Capture (Mobile)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] Photo Capture      [âš™ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚     ðŸ“· CAMERA VIEW      â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚     [Live camera]       â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ PHOTO TYPE                  â”‚
â”‚ ðŸ”˜ Before    â—‹ During       â”‚
â”‚ â—‹ Complete   â—‹ Issue        â”‚
â”‚                             â”‚
â”‚ ROOM/AREA                   â”‚
â”‚ [Kitchen â–¼]                 â”‚
â”‚                             â”‚
â”‚ DESCRIPTION                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Electrical outlets       â”‚ â”‚
â”‚ â”‚installed per plans      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ GPS: âœ… Enabled             â”‚
â”‚ TIME: 2:34 PM               â”‚
â”‚                             â”‚
â”‚        [ðŸ“· CAPTURE]         â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚[ðŸ ][ðŸ“‹][ðŸ’¬][ðŸ’°][ðŸ‘¤]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Invoice Creation (Mobile)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] Create Invoice     [ðŸ’¾] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚ INVOICE #2024-001           â”‚
â”‚                             â”‚
â”‚ PROJECT                     â”‚
â”‚ Kitchen Remodel             â”‚
â”‚ ðŸ“… Jan 15-19, 2024          â”‚
â”‚                             â”‚
â”‚ WORK COMPLETED              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚âœ… Electrical rough-in   â”‚ â”‚
â”‚ â”‚   8 hrs Ã— $85/hr        â”‚ â”‚
â”‚ â”‚   = $680.00             â”‚ â”‚
â”‚ â”‚                         â”‚ â”‚
â”‚ â”‚âœ… Outlet installation   â”‚ â”‚
â”‚ â”‚   4 hrs Ã— $85/hr        â”‚ â”‚
â”‚ â”‚   = $340.00             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ MATERIALS                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚â€¢ Wire (250ft) - $125    â”‚ â”‚
â”‚ â”‚â€¢ Outlets (8) - $48      â”‚ â”‚
â”‚ â”‚â€¢ Switches (4) - $24     â”‚ â”‚
â”‚ â”‚               = $197.00 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â”‚
â”‚ TOTAL: $1,217.00            â”‚
â”‚                             â”‚
â”‚ REQUIRED DOCUMENTS          â”‚
â”‚ âœ… Lien waiver              â”‚
â”‚ âœ… Insurance cert           â”‚
â”‚ âš ï¸  Photos needed           â”‚
â”‚                             â”‚
â”‚ [ðŸ“Ž ADD PHOTOS]             â”‚
â”‚ [ðŸ“¤ SUBMIT INVOICE]         â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚[ðŸ ][ðŸ“‹][ðŸ’¬][ðŸ’°][ðŸ‘¤]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Staff Portal Wireframes

### 1. Staff Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ—ï¸ BENSON STAFF PORTAL                    [Mike] [Settings] [ðŸ””]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ BUSINESS OVERVIEW                                  Today: Jan 20â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ACTIVE      â”‚ â”‚ ESTIMATES   â”‚ â”‚ PROFIT      â”‚ â”‚ CASH FLOW   â”‚ â”‚
â”‚ â”‚ PROJECTS    â”‚ â”‚ PENDING     â”‚ â”‚ THIS MONTH  â”‚ â”‚ AVAILABLE   â”‚ â”‚
â”‚ â”‚     12      â”‚ â”‚      3      â”‚ â”‚   $28,450   â”‚ â”‚   $45,200   â”‚ â”‚
â”‚ â”‚ ðŸ”¼ +2       â”‚ â”‚ ðŸ”½ -1       â”‚ â”‚ ðŸ”¼ +12%     â”‚ â”‚ ðŸ”¼ +$5,200  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI ESTIMATOR QUEUE          â”‚ â”‚ SUBCONTRACTOR STATUS        â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ ðŸ”„ Processing: Home Inspect â”‚ â”‚ âœ… Active: 8 subs           â”‚ â”‚
â”‚ â”‚ â³ Review: Kitchen PDF      â”‚ â”‚ ðŸ’° Payment due: 3 subs      â”‚ â”‚
â”‚ â”‚ ðŸ“‹ Complete: Water damage   â”‚ â”‚ ðŸ“‹ Missing docs: 1 sub      â”‚ â”‚
â”‚ â”‚                             â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚ [Open AI Workspace]         â”‚ â”‚ [Manage Subcontractors]     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ PROJECT PIPELINE                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ LEADS(4) â†’ ESTIMATES(3) â†’ APPROVED(5) â†’ ACTIVE(12) â†’ DONE(2)â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ [Water Damage] [Kitchen]    [Bathroom] [Office]   [Garage] â”‚ â”‚
â”‚ â”‚ [Inspection]   [Remodel]    [Remodel]  [Repair]   [Clean]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ ALERTS & NOTIFICATIONS                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸš¨ Change order requires approval - Kitchen project         â”‚ â”‚
â”‚ â”‚ ðŸ’° Payment due to ABC Plumbing in 2 days                  â”‚ â”‚
â”‚ â”‚ ðŸ“‹ Insurance docs needed for Claim #12345                 â”‚ â”‚
â”‚ â”‚ âœ… Electrical inspection passed - Oak Street project       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ QUICK ACTIONS                                                   â”‚
â”‚ [ðŸ¤– New AI Estimate] [ðŸ“‹ Create Project] [ðŸ‘¥ Manage Users] [ðŸ“Š Reports]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. AI Estimator Workspace

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Dashboard] AI ESTIMATING WORKSPACE               [Save] [Help]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ STEP 1: PROJECT SETUP                          Status: Complete â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Client: Sarah Johnson          Project: Water Damage Repair â”‚ â”‚
â”‚ â”‚ Address: 123 Oak Street        ZIP: 97701                   â”‚ â”‚
â”‚ â”‚ Type: [Insurance Claim â–¼]      Claim #: INS-2024-001       â”‚ â”‚
â”‚ â”‚ Adjuster: Mike Smith           Coverage: $50,000            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ STEP 2: DOCUMENT PROCESSING                     Status: Completeâ”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“„ inspection_report_012024.pdf (2.3 MB)                   â”‚ â”‚
â”‚ â”‚ âœ… Upload complete    âœ… Text extracted    âœ… Pages mapped  â”‚ â”‚
â”‚ â”‚ Pages: 8    Words: 2,847    Citations: 23 identified       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ STEP 3: AI TASK EXTRACTION                      Status: Completeâ”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ¤– OpenAI GPT-4 Analysis Complete                          â”‚ â”‚
â”‚ â”‚ Extracted: 12 tasks    Confidence: 92%    Citations: 18    â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ HIGH CONFIDENCE (8 tasks)                                   â”‚ â”‚
â”‚ â”‚ â€¢ Water extraction - Living room (98% confidence)          â”‚ â”‚
â”‚ â”‚ â€¢ Drywall replacement - Bedroom walls (95% confidence)     â”‚ â”‚
â”‚ â”‚ â€¢ Flooring removal - Carpet in bedrooms (93% confidence)   â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ NEEDS REVIEW (4 tasks)                                      â”‚ â”‚
â”‚ â”‚ â€¢ Electrical repair - Kitchen outlets (72% confidence)     â”‚ â”‚
â”‚ â”‚ â€¢ Plumbing inspection - Bathroom (68% confidence)          â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ [View All Tasks] [Review Low Confidence]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ STEP 4: QUESTION RESOLUTION                    Status: In Progressâ”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Missing Information Identified: 8 questions                â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ Q1: What is the square footage of water damage?            â”‚ â”‚
â”‚ â”‚     [250 sq ft] [500 sq ft] [750 sq ft] [Custom: ___]      â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ Q2: What type of flooring needs replacement?               â”‚ â”‚
â”‚ â”‚     [Carpet] [Hardwood] [Vinyl] [Tile] [Other: ___]        â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ Q3: How many linear feet of drywall?                       â”‚ â”‚
â”‚ â”‚     [Custom: ___] ft                                        â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ [Answer Questions (5 remaining)]                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ STEP 5: COST CALCULATION                           Status: Ready â”‚
â”‚ [ðŸš€ Generate Estimate] - All information collected             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Business Intelligence Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Dashboard] BUSINESS INTELLIGENCE                [Export] [âš™ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ PROFIT & LOSS ANALYSIS                          YTD: $284,500   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ REVENUE BY PROJECT TYPE                                     â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Insurance Claims    $156,000 (55%)            â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Remodels             $85,000 (30%)             â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆ Maintenance                $28,500 (10%)             â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆ Inspection Repairs           $15,000 (5%)              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ COST BREAKDOWN      â”‚ â”‚ PROFIT MARGINS      â”‚ â”‚ CASH FLOW   â”‚ â”‚
â”‚ â”‚                     â”‚ â”‚                     â”‚ â”‚             â”‚ â”‚
â”‚ â”‚ Materials: 35%      â”‚ â”‚ Insurance: 28%      â”‚ â”‚ A/R: $45K   â”‚ â”‚
â”‚ â”‚ Labor: 25%          â”‚ â”‚ Remodels: 32%       â”‚ â”‚ A/P: $12K   â”‚ â”‚
â”‚ â”‚ Subcontractors: 30% â”‚ â”‚ Maintenance: 25%    â”‚ â”‚ Net: +$33K  â”‚ â”‚
â”‚ â”‚ Overhead: 10%       â”‚ â”‚ Inspections: 22%    â”‚ â”‚             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ ESTIMATE ACCURACY TRACKING                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Project Name         Estimated    Actual     Variance       â”‚ â”‚
â”‚ â”‚ Kitchen Remodel      $28,500      $29,200    +2.5% âš ï¸      â”‚ â”‚
â”‚ â”‚ Water Damage         $15,000      $14,200    -5.3% âœ…      â”‚ â”‚
â”‚ â”‚ Bathroom Repair      $8,500       $8,750     +2.9% âœ…      â”‚ â”‚
â”‚ â”‚ Office Renovation    $22,000      $23,800    +8.2% ðŸš¨      â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ Overall Accuracy: 94.2% âœ…                                  â”‚ â”‚
â”‚ â”‚ AI Extraction Accuracy: 96.8% âœ…                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ SUBCONTRACTOR PERFORMANCE                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Trade        Active  Avg Rating  On-time  Payment Status   â”‚ â”‚
â”‚ â”‚ Plumbing     2       4.8â˜…        95%      Current          â”‚ â”‚
â”‚ â”‚ Electrical   3       4.9â˜…        100%     Current          â”‚ â”‚
â”‚ â”‚ HVAC         1       4.7â˜…        90%      2 days overdue   â”‚ â”‚
â”‚ â”‚ Flooring     2       4.6â˜…        85%      Current          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ [ðŸ“Š Detailed Reports] [ðŸ“ˆ Trend Analysis] [âš™ï¸ Configure KPIs]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Specifications

### 1. Portal Authentication Guard

```typescript
interface PortalAuthGuard {
  portal: 'client' | 'subcontractor' | 'staff';
  requiredRole: UserRole[];
  redirectOnFail: string;
  checkOrganization?: boolean;
  checkProject?: boolean;
}

// Implementation
const ClientAuthGuard = ({ children }) => {
  const { user, loading } = useAuth();
  const hasClientRole = user?.roles?.some(role => role.startsWith('client_'));

  if (loading) return <LoadingSpinner />;
  if (!user || !hasClientRole) return <Navigate to="/client-portal-login" />;

  return children;
};
```

### 2. Mobile-First Photo Capture Component

```typescript
interface PhotoCaptureProps {
  taskId: string;
  roomOptions: string[];
  onCapture: (photo: CapturedPhoto) => void;
  offlineMode?: boolean;
}

interface CapturedPhoto {
  imageData: string; // base64 or blob URL
  metadata: {
    taskId: string;
    room: string;
    category: "Before" | "During" | "Complete" | "Issue";
    timestamp: Date;
    gpsCoordinates?: GPSCoordinates;
    description: string;
  };
}

const PhotoCapture = ({ taskId, roomOptions, onCapture, offlineMode }) => {
  const [category, setCategory] = useState<PhotoCategory>("During");
  const [room, setRoom] = useState(roomOptions[0]);
  const [description, setDescription] = useState("");
  const [gpsEnabled, setGpsEnabled] = useState(true);

  // Implementation with camera access, GPS, and offline storage
};
```

### 3. Digital Signature Component

```typescript
interface DigitalSignatureProps {
  documentId: string;
  signatureField: string;
  onSign: (signature: SignatureData) => void;
  requireIPAddress?: boolean;
  requireTimestamp?: boolean;
}

interface SignatureData {
  signature: string; // base64 image
  signedBy: string;
  timestamp: Date;
  ipAddress?: string;
  documentHash: string;
}
```

### 4. Insurance Compliance Component

```typescript
interface InsuranceComplianceProps {
  claimNumber: string;
  documents: InsuranceDocument[];
  requiredDocuments: string[];
  onSubmit: (documents: Document[]) => void;
}

const InsuranceCompliance = ({ claimNumber, documents, requiredDocuments }) => {
  const [completedDocs, setCompletedDocs] = useState<string[]>([]);
  const missingDocs = requiredDocuments.filter(doc => !completedDocs.includes(doc));

  return (
    <div className="insurance-compliance">
      <h3>Insurance Claim #{claimNumber}</h3>
      <DocumentChecklist
        required={requiredDocuments}
        completed={completedDocs}
        onUpdate={setCompletedDocs}
      />
      <SubmitButton disabled={missingDocs.length > 0} />
    </div>
  );
};
```

### 5. Real-time Project Status Component

```typescript
interface ProjectStatusProps {
  projectId: string;
  timelineWeeks: number; // 2-4 week standard
  currentWeek: number;
  milestones: Milestone[];
}

const ProjectStatus = ({ projectId, timelineWeeks, currentWeek, milestones }) => {
  const progressPercentage = (currentWeek / timelineWeeks) * 100;

  return (
    <div className="project-status">
      <div className="timeline">
        <ProgressBar percentage={progressPercentage} />
        <WeekIndicator current={currentWeek} total={timelineWeeks} />
      </div>
      <MilestoneList milestones={milestones} currentWeek={currentWeek} />
    </div>
  );
};
```

## Database Schema Updates

### Portal-Specific Tables

```sql
-- Client portal enhancements
CREATE TABLE insurance_claims (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id uuid REFERENCES projects(id),
  claim_number text UNIQUE NOT NULL,
  carrier text NOT NULL,
  adjuster_name text,
  adjuster_contact text,
  deductible decimal(10,2),
  coverage_amount decimal(10,2),
  status text CHECK (status IN ('Submitted', 'Under Review', 'Approved', 'Disputed', 'Closed')),
  claim_documents jsonb DEFAULT '[]',
  created_at timestamptz DEFAULT now()
);

CREATE TABLE change_orders (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id uuid REFERENCES projects(id),
  order_number text NOT NULL,
  reason text NOT NULL,
  original_scope text,
  additional_work text,
  cost_impact decimal(10,2),
  time_impact_days integer,
  status text CHECK (status IN ('Proposed', 'Client Review', 'Approved', 'Rejected')),
  digital_signature jsonb,
  approved_at timestamptz,
  created_by uuid REFERENCES auth.users(id),
  created_at timestamptz DEFAULT now()
);

CREATE TABLE material_selections (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id uuid REFERENCES projects(id),
  category text NOT NULL,
  options jsonb NOT NULL,
  selected_option text,
  visual_mockup_url text,
  insurance_approved boolean DEFAULT false,
  client_approved boolean DEFAULT false,
  approved_at timestamptz,
  created_at timestamptz DEFAULT now()
);

-- Subcontractor portal enhancements
CREATE TABLE subcontractor_companies (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  company_name text NOT NULL,
  trade_specialties text[] DEFAULT '{}',
  primary_contact uuid REFERENCES auth.users(id),
  license_numbers jsonb DEFAULT '{}',
  insurance_certificate jsonb,
  bonding_certificate jsonb,
  w9_document jsonb,
  payment_terms text DEFAULT '7 days',
  created_at timestamptz DEFAULT now()
);

CREATE TABLE work_tasks (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id uuid REFERENCES projects(id),
  subcontractor_id uuid REFERENCES subcontractor_companies(id),
  assigned_to uuid REFERENCES auth.users(id),
  task_description text NOT NULL,
  room text,
  trade text NOT NULL,
  priority text CHECK (priority IN ('Low', 'Normal', 'High', 'Emergency')),
  status text CHECK (status IN ('Assigned', 'In Progress', 'Waiting on GC', 'Complete', 'Blocked')),
  blocked_reason text,
  estimated_hours decimal(5,2),
  actual_hours decimal(5,2),
  due_date timestamptz,
  completed_at timestamptz,
  created_at timestamptz DEFAULT now()
);

CREATE TABLE field_photos (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  task_id uuid REFERENCES work_tasks(id),
  category text CHECK (category IN ('Before', 'During', 'Complete', 'Issue')),
  room text,
  description text,
  photo_url text NOT NULL,
  gps_coordinates jsonb,
  metadata jsonb DEFAULT '{}',
  uploaded_by uuid REFERENCES auth.users(id),
  created_at timestamptz DEFAULT now()
);

CREATE TABLE subcontractor_invoices (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  subcontractor_id uuid REFERENCES subcontractor_companies(id),
  project_id uuid REFERENCES projects(id),
  invoice_number text NOT NULL,
  period_start date,
  period_end date,
  line_items jsonb NOT NULL,
  total_amount decimal(10,2),
  status text CHECK (status IN ('Draft', 'Submitted', 'Under Review', 'Approved', 'Scheduled for Payment', 'Paid')),
  required_waivers jsonb DEFAULT '[]',
  missing_documents text[] DEFAULT '{}',
  submitted_date timestamptz,
  approved_date timestamptz,
  paid_date timestamptz,
  payment_method text,
  created_at timestamptz DEFAULT now()
);

-- Staff portal enhancements
CREATE TABLE business_metrics (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  metric_date date NOT NULL,
  revenue_by_type jsonb NOT NULL,
  cost_breakdown jsonb NOT NULL,
  profit_margins jsonb NOT NULL,
  cash_flow jsonb NOT NULL,
  active_projects integer,
  pending_estimates integer,
  created_at timestamptz DEFAULT now()
);

CREATE TABLE estimate_accuracy_tracking (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  project_id uuid REFERENCES projects(id),
  estimated_total decimal(10,2),
  actual_total decimal(10,2),
  variance_percentage decimal(5,2),
  ai_extraction_accuracy decimal(5,2),
  completion_date date,
  created_at timestamptz DEFAULT now()
);
```

### Row Level Security Policies

```sql
-- Client portal policies
CREATE POLICY "clients_own_projects" ON projects
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM project_participants pp
      WHERE pp.project_id = projects.id
      AND pp.user_id = auth.uid()
      AND pp.role LIKE 'client_%'
    )
  );

CREATE POLICY "clients_own_change_orders" ON change_orders
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM projects p
      JOIN project_participants pp ON p.id = pp.project_id
      WHERE p.id = change_orders.project_id
      AND pp.user_id = auth.uid()
      AND pp.role LIKE 'client_%'
    )
  );

-- Subcontractor portal policies
CREATE POLICY "subs_assigned_tasks" ON work_tasks
  FOR ALL USING (
    assigned_to = auth.uid() OR
    EXISTS (
      SELECT 1 FROM subcontractor_companies sc
      WHERE sc.id = work_tasks.subcontractor_id
      AND sc.primary_contact = auth.uid()
    )
  );

CREATE POLICY "subs_own_invoices" ON subcontractor_invoices
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM subcontractor_companies sc
      WHERE sc.id = subcontractor_invoices.subcontractor_id
      AND (sc.primary_contact = auth.uid() OR
           EXISTS (SELECT 1 FROM subcontractor_profiles sp
                   WHERE sp.user_id = auth.uid()
                   AND sp.company_name = sc.company_name))
    )
  );

-- Staff portal policies
CREATE POLICY "staff_full_access" ON projects
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM staff_profiles sp
      WHERE sp.user_id = auth.uid()
      AND sp.role IN ('staff_admin', 'staff_estimator', 'staff_pm')
    )
  );
```

## API Endpoint Specifications

### Client Portal Endpoints

```typescript
// Project management
GET /api/client/projects
GET /api/client/projects/:id
GET /api/client/projects/:id/timeline
GET /api/client/projects/:id/photos
GET /api/client/projects/:id/documents

// Change orders
GET /api/client/change-orders/:projectId
POST /api/client/change-orders/:id/approve
POST /api/client/change-orders/:id/reject
POST /api/client/change-orders/:id/sign

// Material selections
GET /api/client/material-selections/:projectId
PUT /api/client/material-selections/:id/select
GET /api/client/material-selections/:id/mockup

// Insurance claims
GET /api/client/insurance-claims/:projectId
POST /api/client/insurance-claims/:id/documents
GET /api/client/insurance-claims/:id/status
```

### Subcontractor Portal Endpoints

```typescript
// Work management
GET /api/sub/work-queue
GET /api/sub/work-queue/today
GET /api/sub/work-queue/blocked
PUT /api/sub/tasks/:id/status
POST /api/sub/tasks/:id/start
POST /api/sub/tasks/:id/complete

// Photo management
POST /api/sub/photos/upload
GET /api/sub/photos/:taskId
PUT /api/sub/photos/:id/metadata

// Document access
GET /api/sub/projects/:id/plans
GET /api/sub/projects/:id/specs
GET /api/sub/documents/:id/download

// Invoicing
POST /api/sub/invoices/create
GET /api/sub/invoices/status
PUT /api/sub/invoices/:id/submit
GET /api/sub/payment-status

// Company management
GET /api/sub/company/profile
PUT /api/sub/company/insurance
PUT /api/sub/company/bonding
POST /api/sub/company/w9
```

### Staff Portal Endpoints

```typescript
// AI Estimator (moved from public)
POST /api/staff/ai-estimator/create-project
POST /api/staff/ai-estimator/upload-document
GET /api/staff/ai-estimator/extraction-status/:id
POST /api/staff/ai-estimator/answer-questions
POST /api/staff/ai-estimator/generate-estimate

// Business intelligence
GET /api/staff/analytics/profit-loss
GET /api/staff/analytics/project-profitability
GET /api/staff/analytics/estimate-accuracy
GET /api/staff/analytics/cash-flow
GET /api/staff/analytics/subcontractor-performance

// Project management
GET /api/staff/projects/pipeline
PUT /api/staff/projects/:id/status
GET /api/staff/projects/:id/profitability
POST /api/staff/projects/:id/change-order

// User management
GET /api/staff/users
POST /api/staff/users/create
PUT /api/staff/users/:id/role
DELETE /api/staff/users/:id

// Subcontractor management
GET /api/staff/subcontractors
POST /api/staff/subcontractors/onboard
PUT /api/staff/subcontractors/:id/approve
GET /api/staff/subcontractors/payments-due
```

## Integration Requirements

### HubSpot CRM Integration

```typescript
interface HubSpotIntegration {
  // Sync projects with deals
  syncProjectToDeal: (projectId: string) => Promise<string>; // returns dealId

  // Update deal status based on project progress
  updateDealStage: (dealId: string, stage: string) => Promise<void>;

  // Sync client information
  syncClientContact: (clientId: string) => Promise<string>; // returns contactId

  // Create activities for project milestones
  logProjectActivity: (dealId: string, activity: Activity) => Promise<void>;
}

// Implementation
class HubSpotService {
  async syncProjectToDeal(projectId: string) {
    const project = await getProject(projectId);
    const dealData = {
      dealname: project.name,
      amount: project.estimatedValue,
      dealstage: this.mapProjectStatusToDealStage(project.status),
      closedate: project.estimatedCompletion,
      custom_properties: {
        project_type: project.type,
        insurance_claim: project.insuranceInfo?.claimNumber || null,
      },
    };

    const response = await hubspotClient.crm.deals.basicApi.create({
      properties: dealData,
    });

    return response.id;
  }
}
```

### US Bank Business Integration

```typescript
interface USBankIntegration {
  // Get account balance and cash flow
  getAccountBalance: () => Promise<number>;
  getTransactionHistory: (days: number) => Promise<Transaction[]>;

  // Payment processing
  schedulePayment: (
    amount: number,
    recipient: string,
    date: Date,
  ) => Promise<string>;
  getPaymentStatus: (paymentId: string) => Promise<PaymentStatus>;

  // Account analysis
  getCashFlowProjection: (days: number) => Promise<CashFlowData>;
}

// Implementation for business banking API
class USBankService {
  async scheduleSubcontractorPayment(invoiceId: string, amount: number) {
    const invoice = await getInvoice(invoiceId);
    const subcontractor = await getSubcontractor(invoice.subcontractorId);

    // Schedule payment for 7 days from approval
    const paymentDate = new Date();
    paymentDate.setDate(paymentDate.getDate() + 7);

    return this.schedulePayment(
      amount,
      subcontractor.paymentDetails,
      paymentDate,
    );
  }
}
```

### Document Management Integration

```typescript
interface DocumentManager {
  // PDF processing for inspection reports
  processInspectionReport: (file: File) => Promise<ProcessedDocument>;

  // Digital signatures for change orders
  createSignatureDocument: (changeOrderId: string) => Promise<SigningUrl>;
  completeSignature: (
    documentId: string,
    signature: SignatureData,
  ) => Promise<void>;

  // Insurance document compliance
  validateInsuranceDocuments: (
    claimId: string,
    documents: Document[],
  ) => Promise<ValidationResult>;
}
```

## Deployment Strategy

### Environment Configuration

```typescript
// Portal-specific environment variables
interface PortalConfig {
  client: {
    VITE_CLIENT_PORTAL_URL: string;
    VITE_SIGNATURE_SERVICE_URL: string;
    VITE_INSURANCE_API_URL: string;
  };

  subcontractor: {
    VITE_SUB_PORTAL_URL: string;
    VITE_PHOTO_UPLOAD_URL: string;
    VITE_OFFLINE_SYNC_INTERVAL: number;
  };

  staff: {
    VITE_STAFF_PORTAL_URL: string;
    VITE_HUBSPOT_API_KEY: string;
    VITE_US_BANK_API_URL: string;
    VITE_AI_ORCHESTRATOR_URL: string;
  };
}
```

### iOS App Configuration

```typescript
// React Native configuration for subcontractor mobile app
interface MobileAppConfig {
  bundleId: 'com.bensonhomesolutions.subportal';
  displayName: 'Benson Subs';
  version: '1.0.0';

  features: {
    offlineMode: true;
    cameraIntegration: true;
    gpsTracking: true;
    pushNotifications: true;
    biometricAuth: true;
  };

  permissions: [
    'camera',
    'location',
    'storage',
    'network'
  ];
}

// App.tsx for React Native
export default function App() {
  return (
    <NavigationContainer>
      <AuthProvider>
        <OfflineProvider>
          <Stack.Navigator initialRouteName="WorkQueue">
            <Stack.Screen name="WorkQueue" component={WorkQueueScreen} />
            <Stack.Screen name="TaskDetails" component={TaskDetailsScreen} />
            <Stack.Screen name="PhotoCapture" component={PhotoCaptureScreen} />
            <Stack.Screen name="InvoiceCreate" component={InvoiceCreateScreen} />
          </Stack.Navigator>
        </OfflineProvider>
      </AuthProvider>
    </NavigationContainer>
  );
}
```

This comprehensive wireframe and implementation specification provides the detailed blueprint needed to build out the three-portal architecture with proper security boundaries, business-specific workflows, and scalable technical infrastructure tailored to Benson Home Solutions' exact requirements.
